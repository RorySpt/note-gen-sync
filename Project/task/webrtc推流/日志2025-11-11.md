引擎画面能够推送到web端，但是编码效率很低，需要优化

优化思路：引擎渲染画面在GPU端转成YUV然后发给编码器（GPU->GPU）,拿取编码结果

尝试：
创建vulkan编码器，利用ffmpeg硬件帧将vkImage的数据交给编码器，具体做法通过av_hwframe_get_buffer从AVHWFramesContext获取一个data类型为AVVkFrame的AVFrame，将VkImage，VkDeviceMemory等内容传递进去，然后调用av_send_frame

打开编码器失败，返回-22（参数设置错误），修改参数无效

控制台运行：

```powershell
PS > ffmpeg -i .\MediaExample.mp4 -vcodec h264_vulkan .\temp.mp4
Impossible to convert between the formats supported by the filter 'Parsed_null_0' and the filter 'auto_scale_0'
Link 'Parsed_null_0.default' -> 'auto_scale_0.default':
  src: yuv420p
  dst: yuv420p
[vf#0:0 @ 00000194998c08c0] Error reinitializing filters!
[vf#0:0 @ 00000194998c08c0] Task finished with error code: -40 (Function not implemented)
[vf#0:0 @ 00000194998c08c0] Terminating thread with return code -40 (Function not implemented)
[vost#0:0/h264_vulkan @ 000001949921ebc0] [enc:h264_vulkan @ 000001949919f3c0] Could not open encoder before EOF
[vost#0:0/h264_vulkan @ 000001949921ebc0] Task finished with error code: -22 (Invalid argument)
[vost#0:0/h264_vulkan @ 000001949921ebc0] Terminating thread with return code -22 (Invalid argument)
[out#0/mp4 @ 0000019499236980] Nothing was written into output file, because at least one of its streams received no packets.
frame=    0 fps=0.0 q=0.0 Lsize=       0KiB time=N/A bitrate=N/A speed=N/A elapsed=0:00:00.05
[aac @ 000001949923ddc0] Qavg: 231.635
Conversion failed!

PS > ffmpeg -i .\MediaExample.mp4 -vcodec h264_nvenc .\temp.mp4
[out#0/mp4 @ 0000028f035a3980] video:8092KiB audio:474KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.387525%
frame=  900 fps=444 q=19.0 Lsize=    8599KiB time=00:00:29.90 bitrate=2355.9kbits/s speed=14.7x elapsed=0:00:02.02
[aac @ 0000028f0454e140] Qavg: 377.882
```

使用ffmpeg.exe 用h264_vulkan编码器转码时也会报-22错误

nvidia有一个vulkan video的演示例子 [nvpro-samples/vk\_video\_samples: Vulkan video samples](https://github.com/nvpro-samples/vk_video_samples)，暂时为编译通过



